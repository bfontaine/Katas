#! /usr/bin/ruby1.9.1

require "./KataBankOCR"
require "test/unit";

class KataBankOCRTest < Test::Unit::TestCase

    @@tests_u1 = [ # User Story 1
[" _  _  _  _  _  _  _  _  _ \n"\
+"| || || || || || || || || |\n"\
+"|_||_||_||_||_||_||_||_||_|",   "000000000"],

["                           \n"\
+"  |  |  |  |  |  |  |  |  |\n"\
+"  |  |  |  |  |  |  |  |  |",   "111111111"],

[" _  _  _  _  _  _  _  _  _ \n"\
+" _| _| _| _| _| _| _| _| _|\n"\
+"|_ |_ |_ |_ |_ |_ |_ |_ |_ ",   "222222222"],

[" _  _  _  _  _  _  _  _  _ \n"\
+" _| _| _| _| _| _| _| _| _|\n"\
+" _| _| _| _| _| _| _| _| _|",   "333333333"],

["                           \n"\
+"|_||_||_||_||_||_||_||_||_|\n"\
+"  |  |  |  |  |  |  |  |  |",   "444444444"],

[" _  _  _  _  _  _  _  _  _ \n"\
+"|_ |_ |_ |_ |_ |_ |_ |_ |_ \n"\
+" _| _| _| _| _| _| _| _| _|",   "555555555"],

[" _  _  _  _  _  _  _  _  _ \n"\
+"|_ |_ |_ |_ |_ |_ |_ |_ |_ \n"\
+"|_||_||_||_||_||_||_||_||_|",   "666666666"],

[" _  _  _  _  _  _  _  _  _ \n"\
+"  |  |  |  |  |  |  |  |  |\n"\
+"  |  |  |  |  |  |  |  |  |",   "777777777"],

[" _  _  _  _  _  _  _  _  _ \n"\
+"|_||_||_||_||_||_||_||_||_|\n"\
+"|_||_||_||_||_||_||_||_||_|",   "888888888"],

[" _  _  _  _  _  _  _  _  _ \n"\
+"|_||_||_||_||_||_||_||_||_|\n"\
+" _| _| _| _| _| _| _| _| _|",   "999999999"],

["    _  _     _  _  _  _  _ \n"\
+"  | _| _||_||_ |_   ||_||_|\n"\
+"  ||_  _|  | _||_|  ||_| _|",   "123456789"]
    ]

    # User Story 2
    @@tests_u2 = [
        ["000000000", true],
        ["111111111", false],
        ["111111110", true],
        ["664371495", false],
        ["457508000", true]
    ]

    # User Story 3
    @@tests_u3 = [
[" _  _  _  _  _  _  _  _    \n"\
+"| || || || || || || ||_   |\n"\
+"|_||_||_||_||_||_||_| _|  |", "000000051"],

["    _  _  _  _  _  _     _ \n"\
+"|_||_|| || ||_   |  |  | _ \n"\
+"  | _||_||_||_|  |  |  | _|", "49006771? ILL"],

["    _  _     _  _  _  _  _ \n"\
+"  | _| _||_| _ |_   ||_||_|\n"\
+"  ||_  _|  | _||_|  ||_| _ ", "1234?678? ILL"]
    ]

    # User Story 4
    @@tests_u4 = [
["                           \n"\
+"  |  |  |  |  |  |  |  |  |\n"\
+"  |  |  |  |  |  |  |  |  |", "711111111"],

[" _  _  _  _  _  _  _  _  _ \n"\
+" _|| || || || || || || || |\n"\
+"|_ |_||_||_||_||_||_||_||_|", "200800000"],

[" _  _  _  _  _  _  _  _  _ \n"\
+" _| _| _| _| _| _| _| _| _|\n"\
+" _| _| _| _| _| _| _| _| _|", "333393333"],

[" _  _  _  _  _  _  _  _  _ \n"\
+"|_||_||_||_||_||_||_||_||_|\n"\
+"|_||_||_||_||_||_||_||_||_|", "888888888 AMB ['888886888', '888888880', '888888988']"],

[" _  _  _  _  _  _  _  _  _ \n"\
+"|_ |_ |_ |_ |_ |_ |_ |_ |_ \n"\
+" _| _| _| _| _| _| _| _| _|", "555555555 AMB ['555655555', '559555555']"],

[" _  _  _  _  _  _  _  _  _ \n"\
+"|_ |_ |_ |_ |_ |_ |_ |_ |_ \n"\
+"|_||_||_||_||_||_||_||_||_|", "666666666 AMB ['666566666', '686666666']"],

[" _  _  _  _  _  _  _  _  _ \n"\
+"|_||_||_||_||_||_||_||_||_|\n"\
+" _| _| _| _| _| _| _| _| _|", "999999999 AMB ['899999999', '993999999', '999959999']"],

["    _  _  _  _  _  _     _ \n"\
+"|_||_|| || ||_   |  |  ||_ \n"\
+"  | _||_||_||_|  |  |  | _|", "490067715 AMB ['490067115', '490067719', '490867715']"],

["    _  _     _  _  _  _  _ \n"\
+" _| _| _||_||_ |_   ||_||_|\n"\
+"  ||_  _|  | _||_|  ||_| _|", "123456789"],

[" _     _  _  _  _  _  _    \n"\
+"| || || || || || || ||_   |\n"\
+"|_||_||_||_||_||_||_| _|  |", "000000051"],

["    _  _  _  _  _  _     _ \n"\
+"|_||_|| ||_||_   |  |  | _ \n"\
+"  | _||_||_||_|  |  |  | _|", "490867715"]
    ]

    def test_u1
        @@tests_u1.each {|val, ref|
            assert_equal(read_number(val), ref)
        }
    end

    def test_u2
        @@tests_u2.each {|val, ref|
            assert_equal(check_validity(val), ref, val)
        }
    end

    def test_u3
        @@tests_u3.each {|val, ref|
            assert_equal(read_and_check(val), ref)
        }
    end

    def test_u4
        @@tests_u4.each {|val, ref|
            assert_equal(read_and_correct(val), ref)
        }
    end
end
